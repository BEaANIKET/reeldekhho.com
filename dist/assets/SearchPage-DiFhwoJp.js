import{f as C,r as t,d as P,j as e,o as E,b as n}from"./index-rrPmFSZK.js";import{S as L}from"./SearchPost-BQwdZws_.js";import{H as _}from"./HeaderStatic-DeeBWFd8.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=C("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function I(){const[d,u]=t.useState([]),[x,m]=t.useState([]),[h,y]=t.useState([]),[c,f]=t.useState(""),[p,l]=t.useState(!1),[i,j]=t.useState(""),[r,g]=t.useState(!0),v=P(),b=async()=>{l(!0);try{const s=await n.get("/post/getsearchresult",{params:{search:c,city:i}});u(s.data)}catch(s){console.error("Error fetching posts:",s)}finally{l(!1)}},N=async()=>{var s;l(!0);try{const a=await n.get(`post/getuser?search=${c}`);m((s=a.data)==null?void 0:s.users)}catch(a){console.error("Error fetching users:",a)}finally{l(!1)}},w=async()=>{try{const s=await n.get("/post/getcitylist");y(s.data.value||[])}catch(s){console.error("Error fetching cities:",s)}};t.useEffect(()=>{w()},[]);let o;t.useEffect(()=>(l(!0),clearTimeout(o),o=setTimeout(()=>{r?b():N()},1e3),()=>clearTimeout(o)),[c,i,r]);const k=()=>e.jsx("div",{className:"columns-2 sm:columns-3 gap-4",children:Array(6).fill(0).map((s,a)=>e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse mb-4"},a))}),S=()=>e.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((s,a)=>e.jsxs("div",{className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-full"}),e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]})]},a))});return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsxs("div",{className:"mt-8 md:mt-0 bg-gray-100 max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"p-1 bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(T,{className:"text-sky-600"}),e.jsxs("select",{value:i,onChange:s=>j(s.target.value),className:"w-32 p-2 bg-inherit dark:text-white text-sm focus:outline-none",children:[e.jsx("option",{value:"",children:"Select City"}),h.map(s=>e.jsx("option",{value:s.city,children:s.city},s._id))]})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(E,{className:"absolute text-xs dark:text-white left-3 top-3"}),e.jsx("input",{type:"text",placeholder:"Search posts or users",value:c,onChange:s=>f(s.target.value),className:"w-full p-3 bg-gray-100 dark:bg-gray-800 rounded-lg pl-10 focus:outline-none dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-start gap-4 bg-gray-100 p-2 rounded-md",children:[e.jsx("button",{onClick:()=>g(!0),className:`px-4 py-2 font-semibold text-sm  ${r?"bg-[#004969] text-white":"bg-white text-gray-700"} rounded-md shadow`,children:"Post"}),e.jsx("button",{onClick:()=>g(!1),className:`px-4 py-2 text-sm font-medium ${r?"bg-white text-gray-700":"bg-[#004969] text-white"} rounded-md shadow`,children:"User"})]}),p?r?e.jsx(k,{}):e.jsx(S,{}):r?d.length?e.jsx("div",{className:" flex flex-col w-full ",children:e.jsx("div",{className:"columns-2 sm:columns-3 gap-4",children:e.jsx(L,{info:d})})}):e.jsx("div",{className:"text-center text-gray-500",children:"No posts found."}):x.length?e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs("div",{onClick:()=>v(`/seller/${s._id}`),className:"p-4 bg-white cursor-pointer dark:bg-gray-800 rounded-lg shadow-md flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16",children:e.jsx("img",{src:s.profilePicture,alt:"Profile",className:"w-full h-full rounded-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.email})]})]},s._id))}):e.jsx("div",{className:"text-center text-gray-500",children:"No users found."})]})]})}export{I as default};
