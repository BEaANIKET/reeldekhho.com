const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Post-9hJhqdB6.js","assets/index-rrPmFSZK.js","assets/index-ejnZHO_h.css","assets/index-DTZsAICM.js","assets/useSavedpost-G6qqAXys.js"])))=>i.map(i=>d[i]);
import{j as e,U as f,r as o,u,a as v,b as h,s as p,c as N,_ as b}from"./index-rrPmFSZK.js";import{H as y}from"./HeaderStatic-DeeBWFd8.js";function w(){return e.jsx("div",{className:"p-4 sticky top-4",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(f,{className:"w-8 h-8 dark:text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold dark:text-white",children:"Welcome to Reeldekho"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Discover people to follow"})]})]})})})}const k=()=>{const[x,i]=o.useState(!1),[m,t]=o.useState(null),d=u(a=>{var r;return(r=a==null?void 0:a.post)==null?void 0:r.posts}),s=v(),l=u(a=>{var r;return(r=a==null?void 0:a.post)==null?void 0:r.page});let g=[];return o.useEffect(()=>{const a=async()=>{var r,c;i(!0);try{g=d.map(j=>j._id).join(",");const n=await h.get(`/post/get?page=${l}&excludeIds=${g}`);s(p({type:"ADD_POST",payload:n.data.posts}))}catch(n){t(((c=(r=n.response)==null?void 0:r.data)==null?void 0:c.message)||"An error occurred")}finally{i(!1)}};d!=null&&d.length||a()},[]),{loading:x,error:m,posts:d,loadMorePosts:async()=>{var a,r;try{g=d.map(n=>n._id).join(",");const c=await h.get(`/post/get?page=${l}&excludeIds=${g}`);c.data.posts.length>0&&s(p({type:"ADD_POST",payload:c.data.posts}))}catch(c){t(((r=(a=c.response)==null?void 0:a.data)==null?void 0:r.message)||"An error occurred")}}}},_=o.lazy(()=>b(()=>import("./Post-9hJhqdB6.js"),__vite__mapDeps([0,1,2,3,4]))),P=()=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"w-full h-14 dark:bg-black bg-white animate-pulse rounded-md mb-2"}),e.jsx("div",{className:"flex max-w-lg h-fit",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[...Array(5)].map((x,i)=>e.jsxs("div",{className:"bg-white dark:bg-black rounded-lg shadow-md p-4 space-y-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gray-400 w-10 h-10 rounded-full"}),e.jsx("div",{className:"bg-gray-400 h-6 w-24 rounded"})]}),e.jsx("div",{className:"bg-gray-400 w-full h-80 rounded-lg mt-4"}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"space-x-4 flex",children:[e.jsx("div",{className:"bg-gray-400 w-6 h-6 rounded-full"}),e.jsx("div",{className:"bg-gray-400 w-6 h-6 rounded-full"}),e.jsx("div",{className:"bg-gray-400 w-6 h-6 rounded-full"})]}),e.jsx("div",{className:"bg-gray-400 w-12 h-6 rounded"})]}),e.jsx("div",{className:"bg-gray-400 h-6 w-3/4 rounded mt-2"}),e.jsx("div",{className:"bg-gray-400 h-6 w-1/2 rounded mt-1"}),e.jsx("div",{className:"bg-gray-400 h-6 w-2/3 rounded mt-3"}),e.jsx("div",{className:"bg-gray-400 h-6 w-3/4 rounded mt-1"})]},i))})})]});function E(){const{loading:x,error:i,loadMorePosts:m}=k(),t=u(s=>{var l;return(l=s==null?void 0:s.post)==null?void 0:l.posts});u(s=>{var l;return(l=s==null?void 0:s.auth)==null?void 0:l.user});const d=N(o.useCallback(()=>{m()},[m]),()=>{},{threshold:.3});return x?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 margintopo",children:[e.jsxs("div",{className:"lg:col-span-2 mx-auto md:mt-0 max-w-2xl",children:[e.jsx(o.Suspense,{fallback:e.jsx("div",{children:" "}),children:e.jsx("div",{className:"",children:(t==null?void 0:t.length)>0?t.map((s,l)=>e.jsx(_,{post:s},l)):e.jsx("div",{className:"text-center text-gray-500",children:"No posts available"})})}),e.jsx("div",{className:"w-full dark:text-white text-black text-center mt-3",ref:d,children:"Loading ..."})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading Suggestions..."}),children:e.jsx(w,{})})})]})]})}export{E as default};
