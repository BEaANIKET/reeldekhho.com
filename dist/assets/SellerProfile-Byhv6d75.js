import{f as u,r as a,d as p,j as e,H as B,k,b as S,l as H,m as O,I as T,n as _,L as N}from"./index-rrPmFSZK.js";import{G as D,P as G}from"./ProfileSkeloton-C5jbmaqA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=u("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=u("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=u("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=u("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function Z(l){const[c,s]=a.useState([]);a.useEffect(()=>{l.posts&&Array.isArray(l.posts[0])?s(l.posts[0]):s(l.posts)},[l.posts]);const r=p();return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsx("div",{className:"flex space-x-12",children:e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 border-t-2 border-black dark:border-white -mt-px",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"POSTS"})]})})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:c.map(t=>{var d,o,m,x;return e.jsxs("div",{onClick:()=>r(`/reels/${t._id}`),className:"relative aspect-square group cursor-pointer",children:[["mp4","webm","mov"].includes((o=(d=t==null?void 0:t.file)==null?void 0:d.fileType)==null?void 0:o.toLowerCase())?e.jsx("video",{src:t.file.url,className:"w-full h-full object-cover",muted:!0}):["jpg","jpeg","png","gif","webp"].includes((x=(m=t==null?void 0:t.file)==null?void 0:m.fileType)==null?void 0:x.toLowerCase())?e.jsx("img",{src:t==null?void 0:t.file.url,alt:(t==null?void 0:t.caption)||"Post Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:"Unsupported Format"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-3 sm:gap-6 md:gap-9 text-white",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4 sm:w-6 sm:h-6 fill-current"}),e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z"})}),e.jsx("span",{className:"font-semibold",children:(t==null?void 0:t.comments)||0})]})]})})]},t._id)})})]})}function Y({setIsRateBottomSheetOpen:l,sellerId:c,setProfile:s}){const[r,t]=a.useState(0),[d,o]=a.useState(!1),m=i=>{t(i)},x=async()=>{try{o(!0);const i=await S.post(`/user/review?id=${c}`,{star:r});s(i.data.user),alert(`Thank you for rating us ${r} stars!`)}catch{alert("Something went wrong!")}finally{l(!1),o(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50",children:e.jsxs("div",{className:"w-full bg-white rounded-t-lg p-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full"})}),e.jsx("h2",{className:"text-center text-lg font-semibold text-gray-800 mb-4",children:"Rate us"}),e.jsx("div",{className:"flex justify-center items-center gap-2 mb-4",children:[1,2,3,4,5].map(i=>e.jsx(j,{onClick:()=>m(i),className:`w-8 h-8 cursor-pointer ${i<=r?"text-yellow-500":"text-gray-400"}`},i))}),r>0&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mb-4",children:["You selected ",r," star",r>1?"s":"","!"]}),e.jsx("button",{onClick:x,disabled:r===0,className:`block w-full ${d&&"flex items-center justify-center"} px-4 py-2 mb-2 rounded-md font-semibold ${r>0?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:d?e.jsx(k,{className:"animate-spin"}):e.jsx("span",{children:"Submit"})}),e.jsx("button",{onClick:()=>l(!1),className:"block w-full text-center px-4 py-2 rounded-md text-gray-600 hover:bg-gray-100",children:"Cancel"})]})})})}function J(){const l=a.useRef(null),{id:c}=H(),[s,r]=a.useState(!0),[t,d]=a.useState(!1),[o,m]=a.useState(!0),[x,i]=a.useState(!1),[C,P]=a.useState(!0),[F,y]=a.useState(null),[w,h]=a.useState(!1),[R,v]=a.useState(!1),$=p(),{following:g,createFollower:L,removeFollower:M}=O({id:void 0});console.log(g);const f=async()=>{console.log(6);const n=await S.post(`/post/getprofile/${c}`);r(n.data.profile),d(n.data.sellerposts),console.log(7)},E=()=>{const n=g==null?void 0:g.find(b=>b.followedId._id===c);console.log(n),n&&y(n)},I=async()=>{await f()};a.useEffect(()=>{const n=b=>{l.current&&!l.current.contains(b.target)&&h(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]),a.useEffect(()=>{I()},[c]),a.useEffect(()=>{E(),P(!1)},[g]);const q=async()=>{i(!0),await L(c),await f(),i(!1)},z=async()=>{await M(c),h(!1),await f(),y(null)};if(C)return e.jsx(G,{});const A=()=>{window.open(`https://wa.me/${s==null?void 0:s.phone}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 pb-2",children:[e.jsx("div",{className:"max-w-screen-lg mx-auto mt-2 sm:mt-5 md:mt-10 px-4",children:e.jsxs("div",{className:"flex flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 bg-blue-500 rounded-[25%] overflow-hidden",children:e.jsx("img",{src:s==null?void 0:s.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"sm:hidden flex items-center justify-start gap-4 ",children:e.jsx("h1",{className:"text font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-start gap-4 ",children:[e.jsx("h1",{className:"text-xl hidden sm:block md:text-2xl font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{onClick:()=>$("/messages/"+s._id),className:"w-6 h-6 text-gray-500 cursor-pointer"}),e.jsx(_,{onClick:A,className:"w-6 h-6 text-green-500 cursor-pointer"}),e.jsx(W,{onClick:()=>window.open(s.googleMapLink),className:"w-6 h-6 text-blue-500 cursor-pointer"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 md:space-x-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:t.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"posts"})]}),e.jsx("div",{children:e.jsxs(N,{to:`/followers/${c}`,children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:s==null?void 0:s.followers}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"followers"})]})}),e.jsx("div",{children:e.jsxs(N,{to:`/following/${c}`,children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:s==null?void 0:s.following}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"following"})]})})]})}),e.jsxs("div",{className:"sm:mt-4 mt-1 bg-gray-300 p-2 rounded-md",children:[e.jsx("h2",{className:"sm:text-lg text-xs capitalize font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.occupation}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 sm:text-base text-xs",children:[e.jsx("span",{children:"Website @ "}),e.jsx("a",{href:`https://${s==null?void 0:s.website}`,className:"text-blue-500 hover:underline",children:s==null?void 0:s.website}),"| ",s==null?void 0:s.address]})]})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-2 flex gap-4 flex-grow",children:[F?e.jsxs("button",{ref:l,onClick:()=>h(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-1 active:scale-95 border border-green-500 rounded-md text-base sm:text-lg font-semibold bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300",children:[e.jsx(U,{className:`w-5 h-5 ${w?"rotate-180":"rotate-0"} transition-transform`}),"Following"]}):e.jsx("button",{onClick:q,className:" flex-1 flex justify-center items-center px-4 py-1 border rounded-md text-base sm:text-lg font-semibold bg-gray-100 hover:bg-gray-300 dark:bg-gray-800 active:scale-95",children:x?e.jsx(k,{className:"animate-spin"}):"Follow"}),e.jsxs("button",{onClick:()=>v(!0),className:"flex-1 flex justify-center items-center gap-2 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold bg-gray-100 hover:bg-gray-300 dark:bg-gray-800 active:scale-95",children:[e.jsx(j,{className:"text-[#FFAA00] w-5 h-5"})," ","Rate us"]})]}),e.jsx("div",{className:"w-full bg-white p-6 rounded-lg shadow-md mt-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-900",children:(s==null?void 0:s.totalReviews)==0?0:((s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)).toFixed(1)}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-1 mb-1",children:[1,2,3,4,5].map(n=>e.jsx(j,{className:`w-5 h-5 ${(s==null?void 0:s.totalReviews)===0?"text-gray-300":n<=(s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)||n-(s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)<=.5?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},n))}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s==null?void 0:s.totalReviews," reviews"]})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50",children:e.jsxs("div",{ref:l,className:"w-full bg-white rounded-t-lg p-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full"})}),e.jsx("h2",{className:"text-center text-lg font-semibold text-gray-800 mb-4",children:s==null?void 0:s.fullName}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-gray-800 font-semibold cursor-not-allowed",disabled:!0,children:"Following"}),e.jsx("button",{onClick:z,className:"block w-full text-left px-4 py-2 text-red-600 font-semibold hover:bg-gray-100",children:"Unfollow"}),e.jsx("button",{onClick:()=>h(!1),className:"block w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100",children:"Cancel"})]})}),R&&e.jsx(Y,{setIsRateBottomSheetOpen:v,sellerId:c,setProfile:r}),e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 ",children:e.jsx("div",{className:"relative w-full h-[9.5rem] sm:h-60 md:h-72 lg:h-80 overflow-hidden rounded-lg",children:o?e.jsx("video",{src:`https://socket.reeldekho.com/public/Images/${s==null?void 0:s.smallvideo}`,autoPlay:!0,loop:!0,muted:!0,controls:!0,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-gray-500 dark:text-gray-400 mb-2",children:e.jsx(V,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Add Video"})]})})})})})]}),t?e.jsx(Z,{posts:t}):null]})}function X(){return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:e.jsx(J,{})})}export{X as default};
